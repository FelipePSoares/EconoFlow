<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
  <div class="container">
    <!-- Logo Section -->
    <a [routerLink]="logoLink$ | async" class="navbar-brand d-flex align-items-center text-decoration-none">
      <img src="/assets/images/Logo-without-text-background-100-min.png"
           alt="EconoFlow Logo"
           class="me-2"
           width="32"
           height="32">
      <span class="fw-bold text-primary fs-4">EconoFlow</span>
    </a>

    <div class="d-flex">
      <!-- Mobile Notifications -->
      <app-notifications class="d-lg-none"></app-notifications>

      <!-- Mobile Toggle Button -->
      <button class="navbar-toggler border-0"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent"
              aria-expanded="false"
              aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>

    <!-- Collapsible Content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <!-- Left Navigation -->
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a [routerLink]="['/projects']"
             class="nav-link px-3 py-2 rounded-2 mx-1"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}">
            <i class="bi bi-folder me-1"></i>
            {{ 'Projects' | translate }}
          </a>
        </li>
        @if (selectedProject$ | async) {
        <li class="nav-item">
          <a [routerLink]="['/projects', (selectedProject$ | async)?.id]"
             class="nav-link px-3 py-2 rounded-2 mx-1"
             routerLinkActive="active"
             [routerLinkActiveOptions]="{exact: true}">
            <i class="bi bi-graph-up me-1"></i>
            {{ 'ProjectOverview' | translate }}
          </a>
        </li>
        }
      </ul>

      <!-- Right Side - User Menu (Desktop Dropdown) -->
      <ul class="navbar-nav d-none d-lg-flex">
        <!-- Notifications Dropdown -->
        <li class="nav-item me-2">
          <app-notifications></app-notifications>
        </li>

        <!-- User Menu Dropdown -->
        <li class="nav-item dropdown">
          <button class="btn btn-outline-secondary dropdown-toggle d-flex align-items-center"
                  type="button"
                  id="dropdownMenuProfile"
                  data-bs-toggle="dropdown"
                  aria-expanded="false">
            <div class="person bg-primary rounded-circle d-flex align-items-center justify-content-center me-2">
              <i class="bi bi-person-fill text-white"></i>
            </div>
            <span class="me-1">{{ fullName$ | async }}</span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow border-0"
              aria-labelledby="dropdownMenuProfile">
            <li>
              <h4 class="dropdown-header">
                <i class="bi bi-person-circle me-2"></i>
                {{ fullName$ | async }}
              </h4>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item py-2" [routerLink]="['/user']" routerLinkActive="active" [routerLinkActiveOptions]="{exact: false}">
                <i class="bi bi-gear me-2"></i>
                {{ 'ButtonMyProfile' | translate }}
              </a>
            </li>
            <li><hr class="dropdown-divider"></li>
            <li>
              <a class="dropdown-item py-2 text-danger" [routerLink]="['/logout']">
                <i class="bi bi-box-arrow-right me-2"></i>
                {{ 'ButtonSignOut' | translate }}
              </a>
            </li>
          </ul>
        </li>
      </ul>

      <!-- Mobile User Menu (Direct Links) -->
      <div class="d-lg-none">
        <hr class="my-3">

        <!-- User Info -->
        <div class="px-3 py-2 bg-light rounded-2 mb-3">
          <div class="d-flex align-items-center">
            <div class="person bg-primary rounded-circle d-flex align-items-center justify-content-center me-2">
              <i class="bi bi-person-fill text-white"></i>
            </div>
            <span class="fw-medium">{{ fullName$ | async }}</span>
          </div>
        </div>
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded-2" [routerLink]="['/user']" routerLinkActive="active">
              <i class="bi bi-gear me-2"></i>
              {{ 'ButtonMyProfile' | translate }}
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link px-3 py-2 rounded-2 text-danger" [routerLink]="['/logout']">
              <i class="bi bi-box-arrow-right me-2"></i>
              {{ 'ButtonSignOut' | translate }}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
<app-sticky-notifications></app-sticky-notifications>
